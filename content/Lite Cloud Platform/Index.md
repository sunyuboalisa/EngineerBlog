---
longform:
  format: scenes
  title: Self Cloud Platform
  workflow: Default Workflow
  sceneFolder: /
  scenes: []
  ignoredFiles: []
---
## 前言

### 历史背景：
在一个企业初步转型云平台的时候，将面临很多问题，以前分散的服务和资源怎么统一管理，这些服务又怎么交互，怎么自动化运维，怎么保证高可用。很多云平台都是按照企业的业务需要定制的，一些流行的云平台的一体式解决方案大多不太适合。因此想设计一个可以定制的云平台方案。

### 现状

资源方面：团队开发成员有限、机房主机有限、对主流云平台了解有限。运维方面处于起步状态。

服务方面：服务已经较多，部署依靠有脚本和文档来解决。出问题的时候，通过更新服务重新部署来解决。

### 期望目标

- 资源统一管理

CPU、内存、存储、网络资源统一分配。提供面板来观察所有服务的运行情况。

- 整合内部服务

通过提供统一个服务端点，提供 REST API 的方式调用不同服务。

- 访问安全

将内部资源的访问根据一定的权限管理起来，其对象包括文件、服务、API等

- 自动化部署

通过一台部署机来同时一键部署各种服务；也可以在发布版本的时候，自动构建和部署服务

- 自动化运维

服务出现故障时，能自动转移，实现高可用。

  

## Lite 云平台

Lite云平台是以 K8s 为核心，结合 CNCF 开源项目中的网络、存储、安全、网关等插件，自定制的云平台。

平台中数据中心和服务是分开的，数据中心在主机中以HA方式部署，业务应用在 k8s 中部署。单独管理数据和服务。这种方式的上限会高一些，体现在单独在其他主机处理 IO ，且少一层 K8s 内部网络，对持久化的方式也更加灵活。

  

### 架构

#### 网络

提供内部网络服务，搭建自己的DNS、PKI服务器。

#### 数据中心

提供数据服务，在OS中部署高可用的数据库，定期备份数据。

#### 存储中心

#### Saas 平台（K8s）

提供 Saas 服务，内部或第三方应用都可以部署到 k8s 中，统一分配资源和后期运维管理。

#### Devops

提供 CI/CD 服务，推送代码后自动构建和部署应用，也可以定期构建和部署应用。

提供制品管理服务，可以将内部或第三方的代码打包推送到仓库，重复使用。

### 流程